{"version":3,"sources":["user-settings.js"],"names":["window","addEventListener","makeRequest","params","callback","req","XMLHttpRequest","readyState","DONE","responseText","e","console","error","open","tfaSettings","ajaxurl","setRequestHeader","send","refreshCode","otp","document","getElementById","innerHTML","refreshing","nonce","t","confirm","preventDefault","vr","code","value","vnonce","encodeURIComponent"],"mappings":"AACAA,OAAOC,iBAAiB,mBAAoB,WAO3C,SAASC,EAAYC,EAAQC,GAE5B,IAAIC,EAAM,IAAIC,eACdD,EAAIJ,iBAAiB,mBAAoB,WACxC,IACKI,EAAIE,aAAeD,eAAeE,MACrCJ,EAASC,EAAII,cAGf,MAAOC,GACFC,SACHA,QAAQC,MAAMF,MAKjBL,EAAIQ,KAAK,OAAQC,YAAYC,SAC7BV,EAAIW,iBAAiB,eAAgB,qCACrCX,EAAIY,KAAKd,GAGV,SAASe,IAER,IAAIC,EAAMC,SAASC,eAAe,OAClCF,EAAIG,UAAYR,YAAYS,WAC5BrB,EACC,uCAAyCY,YAAYU,MACrD,SAASC,GAERN,EAAIG,UAAYG,IAnCnBL,SAASC,eAAe,kBAAkBpB,iBAAiB,SAAU,SAASS,GACxEgB,QAAQZ,YAAYY,UACxBhB,EAAEiB,mBAsCJP,SAASC,eAAe,gBAAgBpB,iBAAiB,QAASiB,GAElEE,SAASC,eAAe,UAAUpB,iBAAiB,QAAS,WAC3D,IAAI2B,EAAOR,SAASC,eAAe,iBAC/BQ,EAAOT,SAASC,eAAe,WAAWS,MAC9CZ,IACAU,EAAGN,UAAY,GACfpB,EACC,sCAAwCY,YAAYiB,OAAS,SAAWC,mBAAmBH,GAC3F,SAASJ,GAERG,EAAGN,UAAYG","file":"user-settings.min.js","sourcesContent":["/** global: tfaSettings, XMLHttpRequest */\nwindow.addEventListener('DOMContentLoaded', function() {\n\tdocument.getElementById('tfa-reset-form').addEventListener('submit', function(e) {\n\t\tif (!confirm(tfaSettings.confirm)) {\n\t\t\te.preventDefault();\n\t\t}\n\t});\n\n\tfunction makeRequest(params, callback)\n\t{\n\t\tvar req = new XMLHttpRequest();\n\t\treq.addEventListener('readystatechange', function() {\n\t\t\ttry {\n\t\t\t\tif (req.readyState === XMLHttpRequest.DONE) {\n\t\t\t\t\tcallback(req.responseText);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tif (console) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treq.open('POST', tfaSettings.ajaxurl);\n\t\treq.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\treq.send(params);\n\t}\n\n\tfunction refreshCode()\n\t{\n\t\tvar otp = document.getElementById('otp');\n\t\totp.innerHTML = tfaSettings.refreshing;\n\t\tmakeRequest(\n\t\t\t'action=tfa-refresh-code&_ajax_nonce=' + tfaSettings.nonce,\n\t\t\tfunction(t)\n\t\t\t{\n\t\t\t\totp.innerHTML = t;\n\t\t\t}\n\t\t);\n\t}\n\n\tdocument.getElementById('refresh-code').addEventListener('click', refreshCode);\n\n\tdocument.getElementById('verify').addEventListener('click', function() {\n\t\tvar vr   = document.getElementById('verify-result');\n\t\tvar code = document.getElementById('otpcode').value;\n\t\trefreshCode();\n\t\tvr.innerHTML = '';\n\t\tmakeRequest(\n\t\t\t'action=tfa-verify-code&_ajax_nonce=' + tfaSettings.vnonce + '&code=' + encodeURIComponent(code),\n\t\t\tfunction(t)\n\t\t\t{\n\t\t\t\tvr.innerHTML = t;\n\t\t\t}\n\t\t);\n\t});\n});\n"]}