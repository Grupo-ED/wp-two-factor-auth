{"version":3,"sources":["user-settings.js"],"names":["callback","makeRequest","params","req","XMLHttpRequest","addEventListener","responseText","e","console","error","open","tfaSettings","ajaxurl","setRequestHeader","send","refreshCode","otp","document","getElementById","innerHTML","refreshing","nonce","t","innerText","confirm","preventDefault","vr","code","value","vnonce","encodeURIComponent","readyState"],"mappings":"CACA,WACC,SAASA,IAQR,SAASC,EAAYC,EAAQF,GAE5B,IAAIG,EAAM,IAAIC,eACdD,EAAIE,iBAAiB,OAAQ,WAC5B,IACCL,EAASG,EAAIG,cAEd,MAAOC,GACNC,SAAWA,QAAQC,MAAMF,MAI3BJ,EAAIO,KAAK,OAAQC,YAAYC,SAC7BT,EAAIU,iBAAiB,eAAgB,qCACrCV,EAAIW,KAAKZ,GAGV,SAASa,IAER,IAAIC,EAAMC,SAASC,eAAe,OAClCF,EAAIG,UAAYR,YAAYS,WAC5BnB,EACC,uCAAyCU,YAAYU,MACrD,SAASC,GAERN,EAAIO,UAAYD,IA/BnBL,SAASC,eAAe,kBAAkBb,iBAAiB,SAAU,SAASE,GACxEiB,QAAQb,YAAYa,UACxBjB,EAAEkB,mBAkCJR,SAASC,eAAe,gBAAgBb,iBAAiB,QAASU,GAElEE,SAASC,eAAe,UAAUb,iBAAiB,QAAS,WAC3D,IAAIqB,EAAOT,SAASC,eAAe,iBAC/BS,EAAOV,SAASC,eAAe,WAAWU,MAC9Cb,IACAW,EAAGP,UAAY,GACflB,EACC,sCAAwCU,YAAYkB,OAAS,SAAWC,mBAAmBH,GAC3F,SAASL,GAERI,EAAGP,UAAYG,MAMS,YAAxBL,SAASc,WACZd,SAASZ,iBAAiB,mBAAoBL,GAG9CA,IA5DF","file":"user-settings.min.js","sourcesContent":["/** global: tfaSettings, XMLHttpRequest */\n(function() {\n\tfunction callback()\n\t{\n\t\tdocument.getElementById('tfa-reset-form').addEventListener('submit', function(e) {\n\t\t\tif (!confirm(tfaSettings.confirm)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\n\t\tfunction makeRequest(params, callback)\n\t\t{\n\t\t\tvar req = new XMLHttpRequest();\n\t\t\treq.addEventListener('load', function() {\n\t\t\t\ttry {\n\t\t\t\t\tcallback(req.responseText);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tconsole && console.error(e);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treq.open('POST', tfaSettings.ajaxurl);\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\t\treq.send(params);\n\t\t}\n\n\t\tfunction refreshCode()\n\t\t{\n\t\t\tvar otp = document.getElementById('otp');\n\t\t\totp.innerHTML = tfaSettings.refreshing;\n\t\t\tmakeRequest(\n\t\t\t\t'action=tfa-refresh-code&_ajax_nonce=' + tfaSettings.nonce,\n\t\t\t\tfunction(t)\n\t\t\t\t{\n\t\t\t\t\totp.innerText = t;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tdocument.getElementById('refresh-code').addEventListener('click', refreshCode);\n\n\t\tdocument.getElementById('verify').addEventListener('click', function() {\n\t\t\tvar vr   = document.getElementById('verify-result');\n\t\t\tvar code = document.getElementById('otpcode').value;\n\t\t\trefreshCode();\n\t\t\tvr.innerHTML = '';\n\t\t\tmakeRequest(\n\t\t\t\t'action=tfa-verify-code&_ajax_nonce=' + tfaSettings.vnonce + '&code=' + encodeURIComponent(code),\n\t\t\t\tfunction(t)\n\t\t\t\t{\n\t\t\t\t\tvr.innerHTML = t;\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', callback);\n\t}\n\telse {\n\t\tcallback();\n\t}\n})();\n"]}