{"version":3,"sources":["tfa.js"],"names":["window","addEventListener","tfaCallback","e","preventDefault","form","removeEventListener","username","document","getElementById","value","req","XMLHttpRequest","readyState","DONE","JSON","parse","responseText","status","tfa","removeAttribute","style","display","focus","submit","console","error","open","tfaSettings","ajaxurl","setRequestHeader","send","encodeURIComponent"],"mappings":"AAAAA,OAAOC,iBAAiB,mBAAoB,WAI3C,SAASC,EAAYC,GAEpBA,EAAEC,iBACFC,EAAKC,oBAAoB,SAAUJ,GAEnC,IAAIK,EAAWC,SAASC,eAAe,cAAcC,MACrD,IAAKH,EACJ,OAAO,EAGR,IAAII,EAAM,IAAIC,eA0Bd,OAzBAD,EAAIV,iBAAiB,mBAAoB,WACxC,IACC,GAAIU,EAAIE,aAAeD,eAAeE,KAAM,CAE3C,IAAiB,IADTC,KAAKC,MAAML,EAAIM,cACjBC,OAAiB,CACtB,IAAIC,EAAMX,SAASC,eAAe,mBAClCU,EAAIC,gBAAgB,YACpBZ,SAASC,eAAe,aAAaY,MAAMC,QAAU,QACrDH,EAAII,aAGJlB,EAAKmB,UAIR,MAAOrB,GACFsB,SACHA,QAAQC,MAAMvB,MAKjBQ,EAAIgB,KAAK,OAAQC,YAAYC,SAC7BlB,EAAImB,iBAAiB,eAAgB,qCACrCnB,EAAIoB,KAAK,4BAA8BC,mBAAmBzB,KACnD,EAvCR,IAAIF,EAAOG,SAASC,eAAe,aACnCJ,EAAKJ,iBAAiB,SAAUC","file":"tfa.min.js","sourcesContent":["window.addEventListener('DOMContentLoaded', function() {\n\tvar form = document.getElementById('loginform');\n\tform.addEventListener('submit', tfaCallback);\n\n\tfunction tfaCallback(e)\n\t{\n\t\te.preventDefault();\n\t\tform.removeEventListener('submit', tfaCallback);\n\n\t\tvar username = document.getElementById('user_login').value;\n\t\tif (!username) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar req = new XMLHttpRequest();\n\t\treq.addEventListener('readystatechange', function() {\n\t\t\ttry {\n\t\t\t\tif (req.readyState === XMLHttpRequest.DONE) {\n\t\t\t\t\tvar r = JSON.parse(req.responseText);\n\t\t\t\t\tif (r.status === true) {\n\t\t\t\t\t\tvar tfa = document.getElementById('two_factor_auth');\n\t\t\t\t\t\ttfa.removeAttribute('disabled');\n\t\t\t\t\t\tdocument.getElementById('tfa-block').style.display = 'block';\n\t\t\t\t\t\ttfa.focus();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tif (console) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treq.open('POST', tfaSettings.ajaxurl);\n\t\treq.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\treq.send('action=tfa-init-otp&user=' + encodeURIComponent(username));\n\t\treturn false;\n\t}\n});\n"]}