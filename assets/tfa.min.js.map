{"version":3,"sources":["tfa.js"],"names":["window","addEventListener","submit","document","getElementById","login","container","input","loginChangeCallback","e","tfaCallback","removeEventListener","preventDefault","stopPropagation","stopImmediatePropagation","username","value","req","XMLHttpRequest","this","response","status","setAttribute","click","removeAttribute","focus","open","tfaSettings","ajaxurl","responseType","setRequestHeader","send","encodeURIComponent"],"mappings":"AACAA,OAAOC,iBAAiB,mBAAoB,WAC3C,IAAIC,EAAYC,SAASC,eAAe,aACpCC,EAAYF,SAASC,eAAe,cACpCE,EAAYH,SAASC,eAAe,aACpCG,EAAYJ,SAASC,eAAe,mBAMxC,SAASI,EAAoBC,GAE5BP,EAAOD,iBAAiB,QAASS,GACjCL,EAAMM,oBAAoB,SAAUH,GAGrC,SAASE,EAAYD,GAEpBA,EAAEG,iBACFH,EAAEI,kBACFJ,EAAEK,2BAEF,IAAIC,EAAWV,EAAMW,MACrB,GAAKD,EAAL,CAIAb,EAAOS,oBAAoB,QAASD,GACpCL,EAAMJ,iBAAiB,SAAUO,GAEjC,IAAIS,EAAM,IAAIC,eACdD,EAAIhB,iBAAiB,OAAQ,WAC5B,GAAI,OAASkB,KAAKC,UAA4B,MAAhBD,KAAKE,SAAmBF,KAAKC,SAASC,OAInE,OAHAd,EAAMe,aAAa,WAAY,IAC/BhB,EAAUgB,aAAa,SAAU,SACjCpB,EAAOqB,QAIRhB,EAAMiB,gBAAgB,YACtBlB,EAAUkB,gBAAgB,UAC1BjB,EAAMkB,UAGPR,EAAIS,KAAK,OAAQC,YAAYC,SAC7BX,EAAIY,aAAe,OACnBZ,EAAIa,iBAAiB,eAAgB,qCACrCb,EAAIc,KAAK,2BAA6BC,mBAAmBjB,KAzC1Db,EAAOD,iBAAiB,QAASS,GACjCJ,EAAUgB,aAAa,SAAU,IACjCf,EAAMe,aAAa,WAAY","file":"tfa.min.js","sourcesContent":["/** global: tfaSettings, XMLHttpRequest */\nwindow.addEventListener('DOMContentLoaded', function() {\n\tvar submit    = document.getElementById('wp-submit');\n\tvar login     = document.getElementById('user_login');\n\tvar container = document.getElementById('tfa-block');\n\tvar input     = document.getElementById('two_factor_auth');\n\n\tsubmit.addEventListener('click', tfaCallback);\n\tcontainer.setAttribute('hidden', '');\n\tinput.setAttribute('disabled', '');\n\n\tfunction loginChangeCallback(e)\n\t{\n\t\tsubmit.addEventListener('click', tfaCallback);\n\t\tlogin.removeEventListener('change', loginChangeCallback);\n\t}\n\n\tfunction tfaCallback(e)\n\t{\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\te.stopImmediatePropagation();\n\n\t\tvar username = login.value;\n\t\tif (!username) {\n\t\t\treturn;\n\t\t}\n\n\t\tsubmit.removeEventListener('click', tfaCallback);\n\t\tlogin.addEventListener('change', loginChangeCallback);\n\n\t\tvar req = new XMLHttpRequest();\n\t\treq.addEventListener('load', function() {\n\t\t\tif (null === this.response || this.status !== 200 || !this.response.status) {\n\t\t\t\tinput.setAttribute('disabled', '');\n\t\t\t\tcontainer.setAttribute('hidden', '');\n\t\t\t\tsubmit.click();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinput.removeAttribute('disabled');\n\t\t\tcontainer.removeAttribute('hidden');\n\t\t\tinput.focus();\n\t\t});\n\n\t\treq.open('POST', tfaSettings.ajaxurl);\n\t\treq.responseType = 'json';\n\t\treq.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\treq.send('action=tfa-init-otp&log=' + encodeURIComponent(username));\n\t}\n});\n"]}